<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='ie=edge' />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <title>`CURRENT_TIMESTAMP` | Dingus</title>
    <meta name="description" content="Better understand the semantics of `CURRENT_TIMESTAMP` within database transactions." />

    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <link href="/stylesheets/site-807805fa.css" rel="stylesheet" /><link href="/stylesheets/code-aa297c99.css" rel="stylesheet" />

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Article",
        "author": {
          "@type": "Person",
          "name": "Chris Lowder"
        },
        "headline": "`CURRENT_TIMESTAMP`",
        "description": "Better understand the semantics of `CURRENT_TIMESTAMP` within database transactions.",
        "datePublished": "2022-02-04T11:25:00+00:00",
        "dateModified": "2022-06-16T14:58:28+01:00",
        "inLanguage": "en-GB"
      }
    </script>
  </head>
  <body class="font-sans bg-fixed dark:bg-neutral-800 dark:text-gray-300">
    <div id="main" role="main" class="max-w-prose p-4 mx-auto">
      <header class="mb-12 mt-8 font-serif">
        <h1 class="font-black text-xl md:text-3xl leading-tight hover:underline"><a href="/">dingus</a></h1>
        <p class="italic">/ˈdɪŋəs/ Something whose name is unknown or forgotten</p>
      </header>

        <article class="mb-24 first:mt-0 prose dark:prose-invert prose-h1:mb-2 prose-pre:bg-inherit">
  <header class="mb-5">
      <h1><code>CURRENT_TIMESTAMP</code></h1>
    <p class="text-sm m-0">February 2022</p>
  </header>
  <main>
    <p>Turns out calling <code class="prettyprint">CURRENT_TIMESTAMP</code> within a transaction will always return
the time the transaction began<sup id="fnref1"><a href="#fn1">1</a></sup>. In my mental model I&rsquo;d always thought of it
being the clock time for the statement.</p>

<p>Postgres aliases <code class="prettyprint">CURRENT_TIMESTAMP</code> to <code class="prettyprint">transaction_timestamp()</code> which is a
more intention revealing name. There&rsquo;s also the well named <code class="prettyprint">clock_timestamp()</code>
and <code class="prettyprint">statement_timestamp()</code>, both of which simply do what-it-says-on-the-tin.</p>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p><a href="https://postgresql.org/docs/14/interactive/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" rel="nofollow noopener noreferrer">https://postgresql.org/docs/14/interactive/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT</a>&nbsp;<a href="#fnref1">&#8617;</a></p>
</li>

</ol>
</div>

  </main>
</article>

    </div>
  </body>
</html>
